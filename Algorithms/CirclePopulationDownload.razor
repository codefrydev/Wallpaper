@page "/download/CirclePopulation"
@if (circlePopulationRef is not null)
{
    <div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 py-8">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold gradient-text mb-4">Circle Population Generator</h1>
                <p class="text-xl text-slate-600">Create dynamic circle patterns with organic population distribution</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Controls Panel -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-slate-800 mb-6">Customize Parameters</h2>
                    
                    <div class="space-y-6">
                        <!-- Width Input -->
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Width of Image</label>
                            <input type="number" 
                                   @bind="width" 
                                   min="1" 
                                   max="100000" 
                                   step="1"
                                   class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors" />
                        </div>

                        <!-- Height Input -->
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Height of Image</label>
                            <input type="number" 
                                   @bind="height" 
                                   min="1" 
                                   max="100000" 
                                   step="1"
                                   class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors" />
                        </div>

                        <!-- Action Buttons -->
                        <div class="flex flex-col sm:flex-row gap-4">
                            <button @onclick="GenerateImage" 
                                    class="flex-1 btn-primary flex items-center justify-center space-x-2 py-3">
                                <i class="fas fa-sync-alt w-5 h-5"></i>
                                <span>Generate Image</span>
                            </button>
                            <button @onclick="DownloadImage" 
                                    class="flex-1 btn-secondary flex items-center justify-center space-x-2 py-3">
                                <i class="fas fa-download w-5 h-5"></i>
                                <span>Download</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Preview Panel -->
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-slate-800 mb-6">Preview</h2>
                    
                    <div class="flex justify-center">
                        <div class="bg-slate-50 rounded-xl p-4 border-2 border-slate-200">
                            <SKCanvasView 
                                @ref="circlePopulationRef.CanvasReference"
                                OnPaintSurface="@circlePopulationRef.OnPaintSurface"
                                style="@($"height: {circlePopulationRef.Height}px; width: {circlePopulationRef.Width}px; border-radius: 8px;")"
                                id="@circlePopulationRef.Id" 
                                IgnorePixelScaling="true" />
                        </div>
                    </div>
                </div>
            </div>

            <!-- Info Section -->
            <div class="mt-8 bg-white rounded-2xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-slate-800 mb-4">About Circle Population</h3>
                <p class="text-slate-600 leading-relaxed">
                    This algorithm creates organic-looking patterns by populating the canvas with circles of varying sizes, 
                    colors, and opacities. The distribution follows natural population patterns, creating visually appealing 
                    compositions that resemble cellular structures or abstract art.
                </p>
            </div>
        </div>
    </div>
}